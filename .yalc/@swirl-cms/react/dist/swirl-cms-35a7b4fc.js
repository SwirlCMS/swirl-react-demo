!function(){function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(t,n){t.appendChild(n)}function a(t,n,e){t.insertBefore(n,e||null)}function i(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return u(" ")}function f(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function p(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function m(t,n,e){t.classList[e?"add":"remove"](n)}function h(t){const n={};for(const e of t)n[e.name]=e.value;return n}let g;function $(t){g=t}const b=[],y=[],x=[],w=[],v=Promise.resolve();let E=!1;function _(t){x.push(t)}const C=new Set;let k=0;function L(){const t=g;do{for(;k<b.length;){const t=b[k];k++,$(t),T(t.$$)}for($(null),b.length=0,k=0;y.length;)y.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];C.has(n)||(C.add(n),n())}x.length=0}while(b.length);for(;w.length;)w.pop()();E=!1,C.clear(),$(t)}function T(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(_)}}const S=new Set;function A(t,n){-1===t.$$.dirty[0]&&(b.push(t),E||(E=!0,v.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function M(s,c,a,l,u,d,f,p=[-1]){const m=g;$(s);const h=s.$$={fragment:null,ctx:null,props:d,update:t,not_equal:u,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(m?m.$$.context:[])),callbacks:e(),dirty:p,skip_bound:!1,root:c.target||m.$$.root};f&&f(h.root);let b=!1;if(h.ctx=a?a(s,c.props||{},((t,n,...e)=>{const o=e.length?e[0]:n;return h.ctx&&u(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),b&&A(s,t)),n})):[],h.update(),b=!0,o(h.before_update),h.fragment=!!l&&l(h.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);h.fragment&&h.fragment.l(t),t.forEach(i)}else h.fragment&&h.fragment.c();c.intro&&(y=s.$$.fragment)&&y.i&&(S.delete(y),y.i(undefined)),function(t,e,s,c){const{fragment:a,on_mount:i,on_destroy:l,after_update:u}=t.$$;a&&a.m(e,s),c||_((()=>{const e=i.map(n).filter(r);l?l.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(_)}(s,c.target,c.anchor,c.customElement),L()}var y;$(m)}let N;function D(t){let n,e,r,s,u,h,g,$,b,y,x,w,v,E,_,C,k,L=!t[1]&&j();return{c(){L&&L.c(),n=d(),e=l("div"),r=l("button"),r.textContent="X",s=d(),u=l("h1"),u.textContent="Swirl-CMS",h=d(),g=l("h2"),g.textContent="Edit schema",$=d(),b=l("h2"),b.textContent="Components",y=d(),x=l("h3"),x.textContent="Buttons",w=d(),v=l("button"),v.textContent="Button",E=d(),_=l("button"),_.textContent="Button2",p(r,"class","toggle"),p(v,"id","button1"),p(v,"draggable","true"),p(v,"data-swirl-cms-id","button1#1234"),p(e,"class","components-drawer"),m(e,"open",t[1])},m(o,i){L&&L.m(o,i),a(o,n,i),a(o,e,i),c(e,r),c(e,s),c(e,u),c(e,h),c(e,g),c(e,$),c(e,b),c(e,y),c(e,x),c(e,w),c(e,v),c(e,E),c(e,_),C||(k=[f(r,"click",t[2]),f(v,"dragstart",H),f(v,"dragend",O)],C=!0)},p(t,o){t[1]?L&&(L.d(1),L=null):L||(L=j(),L.c(),L.m(n.parentNode,n)),2&o&&m(e,"open",t[1])},d(t){L&&L.d(t),t&&i(n),t&&i(e),C=!1,o(k)}}}function j(t){let n;return{c(){n=l("div"),p(n,"class","spacer")},m(t,e){a(t,n,e)},d(t){t&&i(n)}}}function B(n){let e,o=n[0]&&D(n);return{c(){o&&o.c(),e=u(""),this.c=t},m(t,n){o&&o.m(t,n),a(t,e,n)},p(t,[n]){t[0]?o?o.p(t,n):(o=D(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&i(e)}}}function H(t){console.log("drag start"),t.dataTransfer.setData("swirl-cms-id",t.target.id),t.dataTransfer.dropEffect="move"}function O(t){t.preventDefault(),console.log("drag end")}function R(t,n,e){let o=!1,r=!1;const s=document.querySelectorAll("[data-swirl-cms-id]");console.log(s);const c=document.createElement("div");return c.classList.add("drop-pad"),c.style="\n\t\theight: 70px;\n\t\tbackground-color: #89e189;\n\t\tposition: absolute;\n\t\twidth: 100vw;\n\t\topacity: 0;\n\t",function(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}((()=>{(function(){const t=new URLSearchParams(window.location.search);return e(0,o=t.has("swirl-cms")),o})()&&(console.log("Mount"),s.forEach((t=>{const n=c.cloneNode(!0);t.insertAdjacentElement("afterend",n),n.addEventListener("dragover",(t=>{t.preventDefault(),n.style.opacity="1",n.style.position="relative"})),n.addEventListener("dragleave",(t=>{n.style.opacity="0",n.style.position="absolute"})),n.addEventListener("drop",(t=>{t.dataTransfer.dropEffect="move";const e=t.dataTransfer.getData("swirl-cms-id");console.log("Element dropped ",e),n.style.opacity="0",n.style.position="absolute"}))})))})),[o,r,function(t){t.preventDefault(),e(1,r=!r)}]}"function"==typeof HTMLElement&&(N=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(n).filter(r);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,n,e){this[t]=e}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(1),e.on_destroy=e.fragment=null,e.ctx=[])}(this),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class q extends N{constructor(t){super(),this.shadowRoot.innerHTML="<style>.spacer{height:400px}.components-drawer{width:100%;height:400px;position:fixed;bottom:0;box-shadow:0px -7px rgba(0, 0, 0, 0.8);background-color:#fff;transition:bottom 0.3s ease-in-out}.components-drawer .toggle{position:absolute;bottom:406px;left:50vw}.components-drawer.open{bottom:-407px}*[draggable='true']{cursor:move}</style>",M(this,{target:this.shadowRoot,props:h(this.attributes),customElement:!0},R,B,s,{},null),t&&t.target&&a(t.target,this,t.anchor)}}customElements.define("swirl-cms",q),new q}();
//# sourceMappingURL=swirl-cms-35a7b4fc.js.map
